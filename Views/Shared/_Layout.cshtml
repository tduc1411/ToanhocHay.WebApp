<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - ToanHocHay</title>
    <link rel="icon" type="image/x-icon" href="/logo_header.ico">

    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">

    <style>
        body {
            font-family: 'Nunito', sans-serif;
        }

        /* Fix UX: Giữ menu không bị mất khi di chuột */
        .group:hover .group-hover\:visible,
        .group\/sub:hover .group-hover\/sub\:visible {
            visibility: visible;
            opacity: 1;
            transform: translateY(0);
        }

        /* Animation nhấp nháy cho số 2 ở Banner */
        @@keyframes pulse-custom {
            0%, 100% {
                opacity: 1;
                transform: scale(1);
            }

            50% {
                opacity: .7;
                transform: scale(1.1);
            }
        }

        .animate-pulse-custom {
            animation: pulse-custom 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
    </style>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#2563EB', // Blue-600
                        secondary: '#F59E0B', // Amber-500
                        dark: '#1E3A8A', // Blue-900
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-gray-50 text-gray-800 flex flex-col min-h-screen">

    @{
        var currentController = ViewContext.RouteData.Values["Controller"]?.ToString();
        var currentAction = ViewContext.RouteData.Values["Action"]?.ToString();

        string IsActive(string controller, string action = null)
        {
            if (action != null)
            {
                return (currentController == controller && currentAction == action)
                ? "text-primary border-b-primary font-bold"
                : "text-gray-600 hover:text-primary border-transparent hover:border-primary";
            }
            else
            {
                return (currentController == controller)
                ? "text-primary border-b-primary font-bold"
                : "text-gray-600 hover:text-primary border-transparent hover:border-primary";
            }
        }
    }

    <header class="bg-white shadow-sm sticky top-0 z-50">
        <div class="container mx-auto px-4 py-2 relative">
            <div class="flex gap-8 items-center">

                <a asp-controller="Home" asp-action="Index" class="flex-shrink-0 block z-10 hover:scale-105 transition duration-300">
                    <img src="~/images/brand/logo_header.png"
                         asp-append-version="true"
                         alt="ToanHocHay Logo"
                         class="h-16 md:h-20 w-auto object-contain" />
                </a>

                <div class="flex-1 flex flex-col justify-between pb-1">

                    <div class="flex items-center justify-between gap-6 pt-1 mb-2">
                        <div class="flex-1 max-w-xl relative mx-auto">
                            <input type="text" placeholder="Tìm kiếm khóa học, bài giảng..." class="w-full pl-6 pr-12 py-2.5 rounded-full border border-gray-300 focus:outline-none focus:border-primary bg-gray-50 text-sm transition">
                            <button class="absolute right-4 top-1/2 -translate-y-1/2 text-blue-500 hover:text-blue-700"><i class="fa-solid fa-magnifying-glass"></i></button>
                        </div>
                        <div class="flex items-center gap-3 flex-shrink-0">
                            <a href="/Student/Dashboard" class="hidden md:flex px-4 py-2 rounded-full bg-orange-50 text-orange-600 font-bold text-xs hover:bg-orange-100 transition items-center gap-2"><i class="fa-solid fa-chart-pie"></i> Dashboard</a>
                            <a href="/Student/Profile" class="hidden md:flex px-4 py-2 rounded-full bg-purple-50 text-purple-600 font-bold text-xs hover:bg-purple-100 transition items-center gap-2"><i class="fa-solid fa-user"></i> Profile</a>

                            <div class="h-6 w-px bg-gray-200 mx-1 hidden md:block"></div>

                            <a href="/Account/Register" class="px-5 py-2 rounded-full border border-blue-600 text-blue-600 font-bold text-sm hover:bg-blue-50 transition">Đăng Ký</a>
                            <a href="/Account/Login" class="px-5 py-2 rounded-full bg-primary text-white font-bold text-sm hover:bg-blue-700 shadow-md transition">Đăng Nhập</a>
                        </div>
                    </div>

                    <nav class="overflow-visible pt-1 w-full pl-32 md:pl-40">
                        <ul class="flex justify-start gap-16 items-center text-sm md:text-base font-bold">
                            <li>
                                <a asp-controller="Home" asp-action="Index" class="flex items-center gap-2 transition pb-1 border-b-2 @IsActive("Home", "Index")">
                                    <i class="fa-solid fa-house"></i> Trang chủ
                                </a>
                            </li>

                            <li>
                                <a asp-controller="Home" asp-action="About" class="flex items-center gap-2 transition pb-1 border-b-2 @IsActive("Home", "About")">
                                    <i class="fa-solid fa-circle-info"></i> Giới thiệu
                                </a>
                            </li>

                            <li class="relative group">
                                <a href="/Course" class="flex items-center gap-2 transition cursor-pointer pb-1 border-b-2 @IsActive("Course")">
                                    <i class="fa-solid fa-book-open"></i> Bài giảng
                                    <i class="fa-solid fa-chevron-down text-xs ml-1 transition-transform group-hover:rotate-180"></i>
                                </a>
                                <ul class="absolute left-0 top-full mt-2 w-60 bg-white border border-gray-100 shadow-xl rounded-xl z-50 py-2 border-t-4 border-t-primary invisible opacity-0 translate-y-2 transition-all duration-200 group-hover:visible group-hover:opacity-100 group-hover:translate-y-0 before:absolute before:-top-4 before:left-0 before:w-full before:h-4 before:bg-transparent">

                                    <li class="relative group/sub hover:bg-blue-50">
                                        <a href="#" class="px-4 py-3 flex justify-between items-center text-sm font-semibold text-gray-700 group-hover/sub:text-primary w-full">
                                            <span><i class="fa-solid fa-calculator mr-2 text-blue-500"></i> Đại số</span>
                                            <i class="fa-solid fa-chevron-right text-xs text-gray-400"></i>
                                        </a>
                                        <ul class="absolute left-[95%] top-0 w-64 bg-white border border-gray-100 shadow-xl rounded-xl py-2 min-h-full invisible opacity-0 -translate-x-2 transition-all duration-200 group-hover/sub:visible group-hover/sub:opacity-100 group-hover/sub:translate-x-0 before:absolute before:top-0 before:-left-6 before:w-6 before:h-full before:bg-transparent">
                                            <li><a href="/Course/Lesson" class="block px-4 py-2 text-sm text-gray-600 hover:bg-blue-50 hover:text-primary">Chương 1: Số tự nhiên</a></li>
                                            <li><a href="/Course/Lesson" class="block px-4 py-2 text-sm text-gray-600 hover:bg-blue-50 hover:text-primary">Chương 2: Số nguyên</a></li>
                                            <li><a href="/Course/Lesson" class="block px-4 py-2 text-sm text-gray-600 hover:bg-blue-50 hover:text-primary">Chương 3: Số hữu tỉ</a></li>
                                            <li><a href="/Course/Lesson" class="block px-4 py-2 text-sm text-gray-600 hover:bg-blue-50 hover:text-primary">Chương 4: Số thực</a></li>
                                        </ul>
                                    </li>

                                    <li class="relative group/sub hover:bg-blue-50 border-t border-gray-50">
                                        <a href="#" class="px-4 py-3 flex justify-between items-center text-sm font-semibold text-gray-700 group-hover/sub:text-primary w-full">
                                            <span><i class="fa-solid fa-shapes mr-2 text-orange-500"></i> Hình học</span>
                                            <i class="fa-solid fa-chevron-right text-xs text-gray-400"></i>
                                        </a>
                                        <ul class="absolute left-[95%] top-0 w-64 bg-white border border-gray-100 shadow-xl rounded-xl py-2 min-h-full invisible opacity-0 -translate-x-2 transition-all duration-200 group-hover/sub:visible group-hover/sub:opacity-100 group-hover/sub:translate-x-0 before:absolute before:top-0 before:-left-6 before:w-6 before:h-full before:bg-transparent">
                                            <li><a href="/Course/Lesson" class="block px-4 py-2 text-sm text-gray-600 hover:bg-blue-50 hover:text-primary">Hình học trực quan</a></li>
                                            <li><a href="/Course/Lesson" class="block px-4 py-2 text-sm text-gray-600 hover:bg-blue-50 hover:text-primary">Tam giác & Tứ giác</a></li>
                                            <li><a href="/Course/Lesson" class="block px-4 py-2 text-sm text-gray-600 hover:bg-blue-50 hover:text-primary">Quan hệ song song</a></li>
                                        </ul>
                                    </li>
                                </ul>
                            </li>

                            <li>
                                <a asp-controller="Exam" asp-action="Index" class="flex items-center gap-2 transition pb-1 border-b-2 @IsActive("Exam")">
                                    <i class="fa-solid fa-pen-to-square"></i> Kiểm tra
                                </a>
                            </li>

                            <li>
                                <a asp-controller="Home" asp-action="Contact" class="flex items-center gap-2 transition pb-1 border-b-2 @IsActive("Home", "Contact")">
                                    <i class="fa-solid fa-phone"></i> Liên hệ
                                </a>
                            </li>
                        </ul>
                    </nav>

                </div>
            </div>
        </div>
    </header>

    <main role="main" class="flex-grow">
        @RenderBody()
    </main>

    <footer class="bg-[#1a237e] text-white pt-16 pb-8 mt-auto relative overflow-hidden">
        <div class="absolute top-0 right-0 w-64 h-64 bg-blue-500 rounded-full mix-blend-multiply filter blur-3xl opacity-10 animate-pulse"></div>
        <div class="container mx-auto px-4 relative z-10">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-12 mb-12">
                <div>
                    <div class="flex items-center gap-3 mb-6">
                        <a asp-controller="Home" asp-action="Index" class="block hover:scale-105 transition duration-300">
                            <img src="~/images/brand/logo.png"
                                 asp-append-version="true"
                                 alt="ToanHocHay Logo"
                                 class="h-16 w-auto object-contain brightness-0 invert opacity-90" />
                        </a>
                    </div>
                    <p class="text-blue-100 text-sm leading-relaxed max-w-sm">
                        Nền tảng giáo dục trực tuyến tiên phong ứng dụng AI giúp học sinh cấp 2 học Toán hiệu quả, xóa bỏ nỗi lo mất gốc.
                    </p>
                </div>
                <div class="md:pl-10">
                    <h4 class="font-bold text-xl mb-6">Về chúng tôi</h4>
                    <ul class="space-y-4 text-sm text-blue-100">
                        <li><a asp-controller="Home" asp-action="About" class="hover:text-white hover:underline transition">Câu chuyện thương hiệu</a></li>
                        <li><a href="#" class="hover:text-white hover:underline transition">Đội ngũ giáo viên</a></li>
                        <li><a href="#" class="hover:text-white hover:underline transition">Chính sách bảo mật</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-bold text-xl mb-6">Liên hệ</h4>
                    <ul class="space-y-4 text-sm text-blue-100 mb-6">
                        <li class="flex items-center gap-3"><div class="w-8 h-8 rounded-full bg-blue-800 flex items-center justify-center"><i class="fa-solid fa-phone text-xs"></i></div> 0912 345 678</li>
                        <li class="flex items-center gap-3"><div class="w-8 h-8 rounded-full bg-blue-800 flex items-center justify-center"><i class="fa-solid fa-envelope text-xs"></i></div> hotro@toanhochay.vn</li>
                        <li class="flex items-center gap-3"><div class="w-8 h-8 rounded-full bg-blue-800 flex items-center justify-center"><i class="fa-solid fa-location-dot text-xs"></i></div> 123 Nguyễn Huệ, TP.HCM</li>
                    </ul>
                </div>
            </div>
            <div class="border-t border-blue-800 pt-8 text-center text-xs text-blue-300 flex flex-col md:flex-row justify-between items-center gap-4">
                <span>&copy; 2025 ToanHocHay E-Learning. Tất cả quyền được bảo lưu.</span>
                <div class="flex gap-4">
                    <a href="#" class="hover:text-white"><i class="fa-brands fa-facebook"></i></a>
                    <a href="#" class="hover:text-white"><i class="fa-brands fa-youtube"></i></a>
                    <a href="#" class="hover:text-white"><i class="fa-brands fa-tiktok"></i></a>
                </div>
            </div>
        </div>
    </footer>

    <script src="~/lib/jquery/dist/jquery.min.js"></script>
    @await RenderSectionAsync("Scripts", required: false)
</body>
</html>
