@{
    Layout = null; // Không dùng _Layout.cshtml chung để tạo không gian học tập trung
}

<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Học bài: Phép cộng số nguyên - ToanHocHay</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&display=swap" rel="stylesheet">
    <!-- MathJax để hiển thị công thức toán -->
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

    <style>
        body { font-family: 'Nunito', sans-serif; }
        .custom-scroll::-webkit-scrollbar { width: 6px; }
        .custom-scroll::-webkit-scrollbar-track { background: #f1f5f9; }
        .custom-scroll::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 3px; }
        .custom-scroll::-webkit-scrollbar-thumb:hover { background: #94a3b8; }

        .tab-active {
            border-bottom: 3px solid #3B82F6;
            color: #1d4ed8;
            font-weight: 700;
        }
    </style>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#3B82F6',
                        secondary: '#F97316',
                        dark: '#1e293b',
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-gray-50 h-screen flex flex-col overflow-hidden">

    <!-- 1. LEARNING HEADER -->
    <header class="h-16 bg-white shadow-sm flex items-center justify-between px-4 lg:px-6 shrink-0 z-20 border-b border-gray-200">
        <div class="flex items-center gap-4">
            <!-- Đã xóa nút Back mũi tên nhỏ ở đây theo yêu cầu -->

            <!-- LOGO: Bấm vào đây để về Home -->
            <a href="/" class="flex items-center gap-2 border-r border-gray-300 pr-4 hover:opacity-80 transition cursor-pointer text-decoration-none">
                <i class="fa-solid fa-shapes text-2xl text-yellow-400"></i>
                <span class="text-xl font-bold text-primary hidden md:block">ToanHocHay</span>
            </a>

            <h1 class="text-sm md:text-base font-bold text-gray-700 truncate max-w-[200px] md:max-w-none">
                Chương 2: Số Nguyên <i class="fa-solid fa-chevron-right text-xs text-gray-400 mx-2"></i> Bài 2: Phép cộng số nguyên
            </h1>
        </div>

        <div class="flex items-center gap-4">
            <div class="hidden md:flex items-center gap-2 text-sm text-gray-600 bg-gray-100 px-3 py-1 rounded-full">
                <i class="fa-solid fa-trophy text-yellow-500"></i>
                <span class="font-bold">120 Điểm</span>
            </div>
            <div class="relative cursor-pointer">
                <img src="https://api.dicebear.com/7.x/fun-emoji/svg?seed=Felix" alt="User" class="w-9 h-9 rounded-full border border-gray-200 bg-blue-50">
            </div>
        </div>
    </header>

    <!-- 2. MAIN CONTENT AREA -->
    <main class="flex-1 flex overflow-hidden">

        <!-- LEFT: VIDEO & CONTENT -->
        <div class="flex-1 flex flex-col overflow-y-auto custom-scroll relative bg-white">

            <!-- Tabs Navigation -->
            <div class="sticky top-0 bg-white border-b border-gray-200 px-6 pt-4 z-10 shadow-sm">
                <div class="flex gap-8">
                    <button onclick="switchTab('theory')" id="tab-btn-theory" class="tab-btn tab-active pb-3 text-gray-600 hover:text-primary transition font-medium">
                        <i class="fa-solid fa-book-open mr-2"></i>Lý thuyết
                    </button>
                    <button onclick="switchTab('docs')" id="tab-btn-docs" class="tab-btn pb-3 text-gray-600 hover:text-primary transition font-medium border-b-3 border-transparent">
                        <i class="fa-solid fa-file-pdf mr-2"></i>Tài liệu
                    </button>
                    <button onclick="switchTab('notes')" id="tab-btn-notes" class="tab-btn pb-3 text-gray-600 hover:text-primary transition font-medium border-b-3 border-transparent">
                        <i class="fa-solid fa-note-sticky mr-2"></i>Ghi chú
                    </button>
                </div>
            </div>

            <!-- Tab Contents -->
            <div class="p-8 max-w-4xl mx-auto w-full pb-20">

                <!-- TAB: LÝ THUYẾT -->
                <div id="content-theory" class="tab-content block animate-fade-in">
                    <h2 class="text-2xl font-bold text-gray-800 mb-4">1. Quy tắc cộng hai số nguyên cùng dấu</h2>

                    <div class="bg-blue-50 border-l-4 border-blue-500 p-4 mb-6 rounded-r-lg shadow-sm">
                        <h3 class="font-bold text-blue-800 mb-2 flex items-center"><i class="fa-solid fa-lightbulb mr-2 text-yellow-500"></i>Định nghĩa:</h3>
                        <p class="text-gray-700 mb-2">Muốn cộng hai số nguyên cùng dấu, ta cộng hai giá trị tuyệt đối của chúng rồi đặt dấu chung trước kết quả.</p>
                        <div class="font-mono bg-white p-3 rounded border border-blue-200 inline-block text-blue-700 font-bold mt-2">
                            $$ a + b = \text{sign}(a) \times (|a| + |b|) $$
                        </div>
                    </div>

                    <h3 class="text-lg font-bold text-gray-800 mb-2">Ví dụ minh họa:</h3>
                    <ul class="list-none space-y-3 text-gray-700 mb-8">
                        <li class="flex items-center gap-3 bg-gray-50 p-3 rounded-lg border border-gray-100">
                            <span class="w-6 h-6 rounded-full bg-green-100 text-green-600 flex items-center justify-center font-bold text-xs">1</span>
                            <span><strong class="text-green-600">(+3) + (+5) = +8</strong> (Cộng hai số dương giống số tự nhiên)</span>
                        </li>
                        <li class="flex items-center gap-3 bg-gray-50 p-3 rounded-lg border border-gray-100">
                            <span class="w-6 h-6 rounded-full bg-red-100 text-red-600 flex items-center justify-center font-bold text-xs">2</span>
                            <span><strong class="text-red-500">(-4) + (-6) = -(4 + 6) = -10</strong> (Cộng hai số âm)</span>
                        </li>
                    </ul>

                    <h2 class="text-2xl font-bold text-gray-800 mb-4 mt-8">2. Quy tắc cộng hai số nguyên khác dấu</h2>
                    <p class="text-gray-700 mb-4">Muốn cộng hai số nguyên khác dấu không đối nhau, ta tìm hiệu hai giá trị tuyệt đối của chúng (số lớn trừ số nhỏ) rồi đặt trước kết quả dấu của số có giá trị tuyệt đối lớn hơn.</p>
                </div>

                <!-- TAB: TÀI LIỆU -->
                <div id="content-docs" class="tab-content hidden">
                    <div class="grid gap-4">
                        <div class="flex items-center justify-between p-4 border rounded-lg hover:shadow-md transition bg-white cursor-pointer group">
                            <div class="flex items-center gap-4">
                                <div class="w-12 h-12 bg-red-50 text-red-500 rounded-lg flex items-center justify-center text-2xl group-hover:bg-red-500 group-hover:text-white transition">
                                    <i class="fa-solid fa-file-pdf"></i>
                                </div>
                                <div>
                                    <h4 class="font-bold text-gray-800">Slide bài giảng (PDF)</h4>
                                    <p class="text-sm text-gray-500">2.4 MB • Đăng tải 2 ngày trước</p>
                                </div>
                            </div>
                            <button class="text-gray-400 hover:text-primary"><i class="fa-solid fa-download text-xl"></i></button>
                        </div>

                        <div class="flex items-center justify-between p-4 border rounded-lg hover:shadow-md transition bg-white cursor-pointer">
                            <div class="flex items-center gap-4">
                                <div class="w-12 h-12 bg-yellow-100 text-yellow-600 rounded-lg flex items-center justify-center text-2xl">
                                    <i class="fa-solid fa-bolt"></i>
                                </div>
                                <div>
                                    <h4 class="font-bold text-gray-800">Flashcard công thức</h4>
                                    <p class="text-sm text-gray-500">Ôn tập nhanh</p>
                                </div>
                            </div>
                            <button class="text-gray-400 hover:text-primary"><i class="fa-solid fa-arrow-up-right-from-square text-xl"></i></button>
                        </div>
                    </div>
                </div>

                <!-- TAB: GHI CHÚ -->
                <div id="content-notes" class="tab-content hidden fade-in">
                    <div class="bg-yellow-50 p-4 rounded-lg border border-yellow-200 mb-4">
                        <textarea class="w-full bg-transparent border-none focus:ring-0 text-gray-700 resize-none h-32 placeholder-gray-400" placeholder="Ghi chú lại những ý quan trọng tại phút 04:20..."></textarea>
                        <div class="flex justify-between items-center mt-2">
                            <span class="text-xs text-gray-500 text-right">04:20</span>
                            <button class="bg-yellow-400 hover:bg-yellow-500 text-white px-4 py-1.5 rounded text-sm font-bold shadow-sm">Lưu ghi chú</button>
                        </div>
                    </div>

                    <div class="space-y-3">
                        <h4 class="font-bold text-gray-700">Ghi chú đã lưu</h4>
                        <div class="p-3 bg-white border rounded-lg shadow-sm">
                            <div class="flex justify-between mb-1">
                                <span class="bg-blue-100 text-blue-700 text-xs px-2 py-0.5 rounded font-bold">02:15</span>
                                <i class="fa-solid fa-trash text-gray-300 hover:text-red-500 cursor-pointer text-xs"></i>
                            </div>
                            <p class="text-gray-600 text-sm">Cộng hai số âm thì kết quả luôn là âm.</p>
                        </div>
                    </div>
                </div>

            </div>

            <!-- Bottom Action Bar -->
            <div class="p-4 border-t border-gray-200 bg-white mt-auto sticky bottom-0 flex justify-between items-center shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.05)]">
                <button class="text-gray-500 hover:text-gray-900 font-bold px-4 py-2"><i class="fa-solid fa-chevron-left mr-2"></i> Bài trước</button>
                <button class="bg-secondary hover:bg-orange-600 text-white font-bold px-8 py-3 rounded-full shadow-lg shadow-orange-200 transition transform hover:-translate-y-1 flex items-center gap-2">
                    <span>Làm bài tập vận dụng</span>
                    <i class="fa-solid fa-arrow-right"></i>
                </button>
            </div>
        </div>

        <!-- RIGHT: SIDEBAR SYLLABUS (Mục lục) -->
        <aside class="w-80 md:w-96 bg-gray-50 border-l border-gray-200 flex flex-col shrink-0 transition-all duration-300" id="sidebar">
            <div class="p-4 border-b border-gray-200 bg-white flex justify-between items-center shadow-sm z-10">
                <h3 class="font-bold text-gray-800">Nội dung khóa học</h3>
                <span class="text-xs font-bold bg-green-100 text-green-700 border border-green-200 px-2 py-1 rounded">Đã xong 10%</span>
            </div>

            <div class="flex-1 overflow-y-auto custom-scroll p-4 space-y-4">

                <!-- Chapter 1 -->
                <div class="bg-white rounded-xl border border-gray-200 overflow-hidden">
                    <button onclick="toggleChapter('chapter-1')" class="w-full p-3 bg-gray-50 border-b border-gray-100 flex justify-between items-center hover:bg-gray-100 transition text-left">
                        <span class="font-bold text-gray-700 text-sm">Chương 1: Tập hợp số tự nhiên</span>
                        <i id="icon-chapter-1" class="fa-solid fa-chevron-down text-gray-400 text-xs transition-transform"></i>
                    </button>
                    <div id="chapter-1" class="hidden">
                        <a href="#" class="flex p-3 gap-3 hover:bg-gray-50 cursor-pointer border-l-4 border-transparent opacity-50 group">
                            <i class="fa-solid fa-circle-play text-gray-400 mt-1 group-hover:text-primary"></i>
                            <div>
                                <h4 class="text-sm font-semibold text-gray-600 group-hover:text-primary">1. Tập hợp & Phần tử</h4>
                                <span class="text-xs text-gray-400">10:00</span>
                            </div>
                        </a>
                    </div>
                </div>

                <!-- Chapter 2 -->
                <div class="bg-white rounded-xl border border-blue-200 overflow-hidden shadow-sm">
                    <button onclick="toggleChapter('chapter-2')" class="w-full p-3 bg-blue-50 border-b border-blue-100 flex justify-between items-center text-left">
                        <span class="font-bold text-primary text-sm">Chương 2: Số nguyên</span>
                        <i id="icon-chapter-2" class="fa-solid fa-chevron-up text-gray-500 text-xs transition-transform"></i>
                    </button>

                    <div id="chapter-2" class="divide-y divide-gray-100 block">
                        <!-- Lessons... -->
                        <a href="#" class="flex p-3 gap-3 hover:bg-gray-50 cursor-pointer border-l-4 border-transparent">
                            <i class="fa-solid fa-circle-check text-green-500 mt-1"></i>
                            <div>
                                <h4 class="text-sm font-semibold text-gray-800">1. Làm quen với số nguyên âm</h4>
                                <span class="text-xs text-gray-500">08:30 • Đã học</span>
                            </div>
                        </a>
                        <a href="#" class="flex p-3 gap-3 bg-blue-50/50 cursor-pointer border-l-4 border-primary">
                            <i class="fa-solid fa-circle-play text-primary mt-1 animate-pulse"></i>
                            <div>
                                <h4 class="text-sm font-bold text-primary">2. Phép cộng số nguyên</h4>
                                <span class="text-xs text-blue-600 font-semibold">12:15 • Đang học</span>
                            </div>
                        </a>
                        <a href="#" onclick="alert('Bài học này chưa được mở!'); return false;" class="flex p-3 gap-3 bg-gray-50 cursor-not-allowed opacity-60 border-l-4 border-transparent">
                            <i class="fa-solid fa-lock text-gray-400 mt-1"></i>
                            <div>
                                <h4 class="text-sm font-semibold text-gray-500">3. Phép trừ số nguyên</h4>
                                <span class="text-xs text-gray-400">15:00</span>
                            </div>
                        </a>
                        <a href="#" onclick="alert('Bài học này chưa được mở!'); return false;" class="flex p-3 gap-3 bg-gray-50 cursor-not-allowed opacity-60 border-l-4 border-transparent">
                            <i class="fa-solid fa-lock text-gray-400 mt-1"></i>
                            <div>
                                <h4 class="text-sm font-semibold text-gray-600">4. Quy tắc dấu ngoặc</h4>
                                <span class="text-xs text-gray-400">12:00</span>
                            </div>
                        </a>
                    </div>
                </div>

                <!-- Chapter 3 -->
                <div class="border-b border-gray-100">
                    <button class="w-full flex justify-between items-center p-4 bg-gray-50 hover:bg-gray-100 text-left">
                        <span class="font-bold text-gray-700 text-sm">Chương 3: Hình học trực quan</span>
                        <i class="fa-solid fa-chevron-down text-gray-500 text-xs"></i>
                    </button>
                </div>

            </div>
        </aside>

    </main>

    <!-- JS Logic -->
    <script>
        function switchTab(tabId) {
            // Reset Styles
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('tab-active', 'border-b-3', 'border-blue-500', 'text-blue-700');
                btn.classList.add('border-transparent');

                // Reset text color to gray default if needed
                if(btn.id !== `tab-btn-${tabId}`) {
                   // Styles handled by Tailwind classes removal/addition logic in CSS
                }
            });

            // Add active class to clicked button
            const activeBtn = document.getElementById(`tab-btn-${tabId}`);
            activeBtn.classList.add('tab-active');
            activeBtn.classList.remove('border-transparent');

            // Hide all content
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.add('hidden');
            });

            // Show selected content
            document.getElementById(`content-${tabId}`).classList.remove('hidden');
        }

        // Logic toggle đóng mở chương
        function toggleChapter(chapterId) {
            const content = document.getElementById(chapterId);
            const icon = document.getElementById('icon-' + chapterId);

            if (content.classList.contains('hidden')) {
                content.classList.remove('hidden');
                icon.classList.remove('fa-chevron-down');
                icon.classList.add('fa-chevron-up');
            } else {
                content.classList.add('hidden');
                icon.classList.remove('fa-chevron-up');
                icon.classList.add('fa-chevron-down');
            }
        }
    </script>
</body>
</html>